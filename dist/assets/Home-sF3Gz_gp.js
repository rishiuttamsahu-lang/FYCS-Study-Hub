import{b as j,r as N,j as e,d as f,G as v,e as w,C as y,f as z,g as D}from"./vendor-react-DTJB9r93.js";import{u as A,a as S}from"./index-ba0X72c2.js";import{M as C}from"./MaterialCard-BDkd7TR5.js";import"./vendor-BigPqmVK.js";import"./vendor-firebase-B7eFefMy.js";const M="/assets/image-DieXvyk4.png",R=()=>{const c=j(),{semesters:n,getSubjectById:o,getSemesterById:k,isAdmin:m}=A(),{homeData:r,fetchHomeData:d,isHomeLoaded:l}=S();N.useEffect(()=>{d()},[d]),console.log("ðŸ  Home Page Data Received:",r);const x=r?.subjects||[],u=r?.recents||[],p=n.map(s=>({id:s.id,title:s.name,subjects:x.filter(t=>Number(t.semId)===Number(s.id)).length,locked:s.id==="3"||s.id==="4"})),i=u.slice(0,10);console.log("ðŸ“Š Recent Materials for Display:",i);const h=s=>{if(!s.createdAt)return!1;const t=s.createdAt?.toDate?s.createdAt.toDate():new Date(s.createdAt||s.date||Date.now()),a=new Date(Date.now()-1440*60*1e3);return t>a},b=()=>e.jsxs("div",{className:"animate-pulse bg-zinc-800 rounded-xl h-40 w-full p-4",children:[e.jsx("div",{className:"bg-zinc-700 rounded-xl w-9 h-9 mb-3"}),e.jsx("div",{className:"bg-zinc-700 rounded h-4 w-3/4 mb-2"}),e.jsx("div",{className:"bg-zinc-700 rounded h-3 w-1/2"})]}),g=s=>{if(!s)return s;if(s.includes("drive.google.com/file/d/")){const t=s.match(/\/file\/d\/([^\/]+)/);if(t&&t[1])return`https://drive.google.com/uc?export=download&id=${t[1]}&confirm=t`}else if(s.includes("drive.google.com/open?id=")){const a=new URL(s).searchParams.get("id");if(a)return`https://drive.google.com/uc?export=download&id=${a}&confirm=t`}else if(s.includes("/d/")&&s.includes("/view")){const t=s.match(/\/d\/([^\/]+)\/view/);if(t&&t[1])return`https://drive.google.com/uc?export=download&id=${t[1]}&confirm=t`}return s};return l?e.jsxs("div",{className:"p-5 pt-10 max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("img",{src:M,alt:"FYCS Study Hub Logo",className:"w-16 h-16 object-contain mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold mb-1",children:"FYCS Study Hub"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Your central hub for first year computer science"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-white/50 uppercase text-[10px] tracking-widest font-bold",children:[e.jsx(f,{size:14}),e.jsx("span",{children:"Quick Section"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-8",children:p.map(s=>{const t=s.locked,a=s.id==="2";return e.jsxs("button",{type:"button",onClick:t?void 0:()=>c(`/semester/${s.id}`),disabled:t,className:`glass-card p-4 text-left transition-colors ${t?"opacity-70 cursor-not-allowed":"hover:bg-white/5"} relative`,children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 w-9 h-9 rounded-xl flex items-center justify-center mb-3 relative",children:[e.jsx(v,{size:18,className:"text-white/90"}),t&&e.jsx(w,{size:14,className:"absolute -top-1 -right-1 text-amber-400"}),a&&!t&&e.jsx(y,{size:8,className:"absolute -top-0.5 -right-0.5 text-green-500 fill-current"})]}),e.jsxs("h2",{className:"font-bold text-sm mb-1 flex items-center gap-1",children:[s.title,a&&!t&&e.jsx("span",{className:"text-[8px] text-green-500 bg-green-500/10 px-1 py-0.5 rounded",children:"LIVE"})]}),t?e.jsx("span",{className:"inline-block px-2 py-0.5 bg-amber-500/10 text-amber-400 text-[10px] rounded-full whitespace-nowrap",children:"Coming Soon"}):e.jsxs("p",{className:"text-[10px] text-white/50",children:[s.subjects," subjects available"]})]},s.id)})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white/50 uppercase text-[10px] tracking-widest font-bold",children:[e.jsx(z,{size:14}),e.jsx("span",{children:"Materials"})]}),e.jsx(D,{to:"/library",className:"text-[11px] font-semibold text-[#FFD700] hover:opacity-90 transition-opacity",children:"Explore"})]}),e.jsx("div",{className:"space-y-4",children:i&&i.length>0?i.map(s=>e.jsx(C,{material:s,convertToDownloadLink:g,navigateToSubject:!0,navigate:c,isNewMaterial:h,getSubjectById:o},s.id)):e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx("div",{className:"text-white/50 mb-2",children:"No materials found"}),e.jsx("div",{className:"text-sm text-white/40",children:l?"No materials available yet":"Loading materials..."}),m&&e.jsx("button",{type:"button",className:"btn-primary mt-4 px-6 py-2 text-sm",onClick:()=>c("/upload"),children:"Upload Material"})]})})]}):e.jsxs("div",{className:"p-5 pt-10 max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"w-16 h-16 bg-zinc-800 rounded-full mx-auto mb-4 animate-pulse"}),e.jsx("div",{className:"h-8 bg-zinc-800 rounded w-48 mx-auto mb-2 animate-pulse"}),e.jsx("div",{className:"h-4 bg-zinc-800 rounded w-64 mx-auto animate-pulse"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-4 h-4 bg-zinc-800 rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-24 animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[...Array(4)].map((s,t)=>e.jsx(b,{},t))}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-zinc-800 rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-20 animate-pulse"})]}),e.jsx("div",{className:"h-4 bg-zinc-800 rounded w-16 animate-pulse"})]}),e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((s,t)=>e.jsx("div",{className:"glass-card p-4 animate-pulse",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-zinc-800 rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-zinc-800 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-1/2 mb-1"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-2/3"})]})]})},t))})]})};export{R as default};
