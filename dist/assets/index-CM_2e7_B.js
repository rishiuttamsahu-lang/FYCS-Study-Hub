const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-BNN8nB6y.js","assets/vendor-react-C85kPXhq.js","assets/vendor-BigPqmVK.js","assets/MaterialCard-Bthj04Gv.js","assets/vendor-firebase-B7eFefMy.js","assets/Login-DugKscIS.js","assets/Library-DEGSHWco.js","assets/Materials-DODAchVu.js","assets/BannedPage-CDfEpl-R.js","assets/Admin-Dc-Jb69t.js","assets/Profile-BuZDupN9.js","assets/Subjects-Ct1n6g0d.js","assets/Upload-BqOKyxbr.js","assets/Navbar-Dh6XXAXh.js","assets/ProtectedRoute-BH5Osuix.js"])))=>i.map(i=>d[i]);
import{r as a,j as e,L as X,F as Y,R as J,a as N,N as Z,u as ee,S as B,X as te,B as se,c as re,H as ae}from"./vendor-react-C85kPXhq.js";import{i as oe,g as ne,G as ie,a as ce,o as z,q as O,b as le,c as A,d as de,e as E,f as C,s as $,u as T,h as V,j as F,k as I,w as q,l as D,m as ue,n as me,p as pe}from"./vendor-firebase-B7eFefMy.js";import"./vendor-BigPqmVK.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))f(c);new MutationObserver(c=>{for(const o of c)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&f(d)}).observe(document,{childList:!0,subtree:!0});function h(c){const o={};return c.integrity&&(o.integrity=c.integrity),c.referrerPolicy&&(o.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?o.credentials="include":c.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function f(c){if(c.ep)return;c.ep=!0;const o=h(c);fetch(c.href,o)}})();const fe="modulepreload",ge=function(m){return"/"+m},U={},w=function(i,h,f){let c=Promise.resolve();if(h&&h.length>0){let v=function(p){return Promise.all(p.map(u=>Promise.resolve(u).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),n=d?.nonce||d?.getAttribute("nonce");c=v(h.map(p=>{if(p=ge(p),p in U)return;U[p]=!0;const u=p.endsWith(".css"),b=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const x=document.createElement("link");if(x.rel=u?"stylesheet":fe,u||(x.as="script"),x.crossOrigin="",x.href=p,n&&x.setAttribute("nonce",n),document.head.appendChild(x),u)return new Promise((y,M)=>{x.addEventListener("load",y),x.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(d){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=d,window.dispatchEvent(n),!n.defaultPrevented)throw d}return c.then(d=>{for(const n of d||[])n.status==="rejected"&&o(n.reason);return i().catch(o)})},he={apiKey:"AIzaSyCCDR8O9zy0bSyCa5dsinR8SSmnMQcWxTY",authDomain:"fycs-study-hub.firebaseapp.com",projectId:"fycs-study-hub",storageBucket:"fycs-study-hub.firebasestorage.app",messagingSenderId:"308883339928",appId:"1:308883339928:web:a5e59d402b7ddf0e4b2eed"},G=oe(he),R=ne(G),be=new ie,g=ce(G),W=a.createContext(),xe=()=>{const m=a.useContext(W);if(!m)throw new Error("useApp must be used within an AppProvider");return m},je=({children:m})=>{const[i,h]=a.useState([]),[f,c]=a.useState([]),[o]=a.useState([{id:"1",name:"Semester 1",active:!0},{id:"2",name:"Semester 2",active:!0},{id:"3",name:"Semester 3",active:!0},{id:"4",name:"Semester 4",active:!0}]),[d,n]=a.useState(null),[v,p]=a.useState([]),[u,b]=a.useState(!0),[x,y]=a.useState(null);a.useEffect(()=>{const s=z(O(A(g,"materials"),le("createdAt","desc")),t=>{const r=t.docs.map(l=>({id:l.id,...l.data()}));h(r),u&&b(!1)},t=>{console.error("Error listening to materials: ",t),u&&b(!1)});return()=>s()},[u]),a.useEffect(()=>{const s=z(A(g,"subjects"),t=>{const r=t.docs.map(l=>({id:l.id,...l.data()}));c(r),u&&b(!1)},t=>{console.error("Error listening to subjects: ",t),u&&b(!1)});return()=>s()},[u]),a.useEffect(()=>{const s=z(A(g,"users"),t=>{const l=t.docs.map(S=>({id:S.id,...S.data()})).sort((S,_)=>{const k=S.createdAt?.seconds||0;return(_.createdAt?.seconds||0)-k});p(l)},t=>{console.error("Error listening to users: ",t)});return()=>s()},[]),a.useEffect(()=>{const s=de(R,async t=>{if(t){const r=E(g,"users",t.uid),l=await C(r);if(!l.exists())await $(r,{uid:t.uid,displayName:t.displayName,email:t.email,photoURL:t.photoURL,role:"student",isBanned:!1,createdAt:new Date}),y("student"),n(t);else{const S=l.data();y(S.role||"student"),n(t)}}else n(null),y(null);u&&b(!1)});return()=>s()},[u]),a.useEffect(()=>{if(!d?.uid)return;const s=E(g,"users",d.uid),t=z(s,r=>{if(r.exists()){const l=r.data();y(l.role||"student"),p(S=>S.map(_=>_.uid===d.uid?{..._,role:l.role}:_))}},r=>{console.error("Error listening to user role: ",r)});return()=>t()},[d?.uid]);const M=d?.email==="rishiuttamsahu@gmail.com"||x==="admin",L=a.useMemo(()=>{const s=i.filter(r=>r.status==="Approved"),t=i.filter(r=>r.status==="Pending");return{totalViews:s.reduce((r,l)=>r+(l.views||0),0),totalDownloads:s.reduce((r,l)=>r+(l.downloads||0),0),pendingRequests:t.length,totalMaterials:i.length,approvedMaterials:s.length,totalSubjects:f.length,totalSemesters:o.length}},[i,f,o]),Q={materials:i,subjects:f,semesters:o,users:v,user:d,userRole:x,stats:L,loading:u,isAdmin:M,login:async()=>{try{return{success:!0,user:(await me(R,be)).user}}catch(s){return console.error("Login error:",s),{success:!1,error:s.message}}},logout:async()=>{try{return await ue(R),{success:!0}}catch(s){return console.error("Logout error:",s),{success:!1,error:s.message}}},addMaterial:async s=>{try{const t=s.title.trim(),r=s.subjectId,l=O(A(g,"materials"),q("subjectId","==",r),q("title","==",t));if(!(await D(l)).empty)return{success:!1,error:"âš ï¸ Duplicate Found: A file with this Name and Subject already exists!"};const _={title:t,subjectId:r,semId:s.semId,type:s.type,link:s.link.trim(),status:"Pending",views:0,downloads:0,uploadedBy:s.uploadedBy||"Student",date:I(),createdAt:I()};return{success:!0,id:(await V(A(g,"materials"),_)).id}}catch(t){return console.error("Error adding material:",t),{success:!1,error:t?.message||t?.toString()||"Failed to add material"}}},approveMaterial:async s=>{try{return await T(E(g,"materials",s),{status:"Approved",approvedAt:I()}),{success:!0}}catch(t){return console.error("Error approving material:",t),{success:!1,error:t?.message||t?.toString()||"Failed to approve material"}}},rejectMaterial:async s=>{try{return await F(E(g,"materials",s)),{success:!0}}catch(t){return console.error("Error rejecting material:",t),{success:!1,error:t?.message||t?.toString()||"Failed to reject material"}}},deleteMaterial:async s=>{try{return await F(E(g,"materials",s)),{success:!0}}catch(t){return console.error("Error deleting material:",t),{success:!1,error:t?.message||t?.toString()||"Failed to delete material"}}},addSubject:async(s,t)=>{try{const r={name:s.trim(),semId:Number(t),icon:"Book",createdAt:new Date};return{success:!0,id:(await V(A(g,"subjects"),r)).id}}catch(r){return console.error("Error adding subject:",r),{success:!1,error:r?.message||r?.toString()||"Failed to add subject"}}},incrementView:async s=>{try{const t=E(g,"materials",s),r=await C(t);if(r.exists()){const l=r.data().views||0;return await T(t,{views:l+1}),{success:!0}}else return{success:!1,error:"Material not found"}}catch(t){return console.error("Error incrementing view:",t),{success:!1,error:t?.message||t?.toString()||"Failed to increment view count"}}},getSubjectById:s=>f.find(t=>t.id===s),getSemesterById:s=>o.find(t=>t.id===s),getMaterialsBySubject:s=>i.filter(t=>t.subjectId===s&&t.status==="Approved"),getMaterialsBySemester:s=>i.filter(t=>t.semId===s&&t.status==="Approved"),getPendingMaterials:()=>i.filter(s=>s.status==="Pending"),getApprovedMaterials:()=>i.filter(s=>s.status==="Approved"),getRecentMaterials:(s=10)=>i.filter(t=>t.status==="Approved").sort((t,r)=>{const l=t.createdAt?.toDate?t.createdAt.toDate():new Date(t.createdAt||t.date||Date.now());return(r.createdAt?.toDate?r.createdAt.toDate():new Date(r.createdAt||r.date||Date.now()))-l}).slice(0,s),getSubjectsBySemester:s=>f.filter(t=>Number(t.semId)===Number(s))};return e.jsx(W.Provider,{value:Q,children:m})},K=a.createContext(),Ze=()=>a.useContext(K),ve=({children:m})=>{const[i,h]=a.useState({subjects:[],recents:[]}),[f,c]=a.useState(!1),[o,d]=a.useState([]),[n,v]=a.useState(!1),p=async()=>{if(!n)try{console.log("ðŸ•µï¸â€â™‚ï¸ DETECTIVE MODE: Looking for data...");const u=await D(A(g,"materials"));console.log(`ðŸ“‚ Collection 'materials': Found ${u.size} items`);const b=await D(A(g,"Materials"));console.log(`ðŸ“‚ Collection 'Materials': Found ${b.size} items`);const x=await D(A(g,"notes"));console.log(`ðŸ“‚ Collection 'notes': Found ${x.size} items`);let y=[...u.docs.map(j=>({id:j.id,...j.data()})),...b.docs.map(j=>({id:j.id,...j.data()})),...x.docs.map(j=>({id:j.id,...j.data()}))];console.log(`ðŸŽ‰ TOTAL RAW ITEMS FOUND: ${y.length}`),y.length===0&&alert("âš ï¸ Database Connected but NO Data Found! Check Collection Name in Firebase Console."),d(y),v(!0),h({subjects:[],recents:y.slice(0,5)});const L=(await D(A(g,"subjects"))).docs.map(j=>({id:j.id,...j.data()}));h(j=>({...j,subjects:L})),c(!0)}catch(u){console.error("ðŸ”¥ CRITICAL ERROR:",u),alert("Error: "+u.message),c(!0),v(!0)}};return e.jsx(K.Provider,{value:{homeData:i,libraryMaterials:o,fetchLibraryData:p,fetchHomeData:p,isLibraryLoaded:n,isHomeLoaded:f},children:m})};function P(){return e.jsxs("div",{className:"flex flex-col h-screen w-full items-center justify-center bg-[#0a0a0a]",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("div",{className:"absolute w-16 h-16 rounded-full border-t-4 border-b-4 border-blue-500 animate-spin opacity-50"}),e.jsx(X,{className:"text-yellow-400 animate-spin z-10",size:32})]}),e.jsx("p",{className:"mt-4 text-zinc-400 text-sm font-medium animate-pulse",children:"Loading awesomeness..."})]})}const ye=a.lazy(()=>w(()=>import("./Home-BNN8nB6y.js"),__vite__mapDeps([0,1,2,3,4]))),we=a.lazy(()=>w(()=>import("./Login-DugKscIS.js"),__vite__mapDeps([5,1,2,4]))),Se=a.lazy(()=>w(()=>import("./Library-DEGSHWco.js"),__vite__mapDeps([6,1,2,3,4]))),Ae=a.lazy(()=>w(()=>import("./Materials-DODAchVu.js"),__vite__mapDeps([7,1,2,3,4]))),Ne=a.lazy(()=>w(()=>import("./BannedPage-CDfEpl-R.js"),__vite__mapDeps([8,1,2,4]))),Ee=a.lazy(()=>w(()=>import("./Admin-Dc-Jb69t.js"),__vite__mapDeps([9,1,2,4]))),_e=a.lazy(()=>w(()=>import("./Profile-BuZDupN9.js"),__vite__mapDeps([10,1,2,4]))),De=a.lazy(()=>w(()=>import("./Subjects-Ct1n6g0d.js"),__vite__mapDeps([11,1,2,4]))),Me=a.lazy(()=>w(()=>import("./Upload-BqOKyxbr.js"),__vite__mapDeps([12,1,2,4]))),ze=a.lazy(()=>w(()=>import("./Navbar-Dh6XXAXh.js"),__vite__mapDeps([13,1,2,4]))),H=a.lazy(()=>w(()=>import("./ProtectedRoute-BH5Osuix.js"),__vite__mapDeps([14,1,2,4])));function Le(){return e.jsxs("div",{className:"h-screen bg-[#0a0a0a] text-white overflow-hidden",children:[e.jsxs("div",{className:"h-16 w-full bg-zinc-950 border-b border-zinc-800 flex items-center px-4 space-x-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-800 animate-pulse"}),e.jsx("div",{className:"h-4 bg-zinc-800 rounded w-24 animate-pulse"}),e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"h-6 w-6 bg-zinc-800 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"p-5 pt-6 max-w-md mx-auto",children:[e.jsx("div",{className:"h-48 w-full bg-zinc-900/50 rounded-3xl animate-pulse mb-6"}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-4 h-4 bg-zinc-800 rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-24 animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[...Array(4)].map((m,i)=>e.jsx("div",{className:"h-32 bg-zinc-900/30 rounded-xl animate-pulse"},i))}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-zinc-800 rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-20 animate-pulse"})]}),e.jsx("div",{className:"h-4 bg-zinc-800 rounded w-16 animate-pulse"})]}),e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((m,i)=>e.jsx("div",{className:"bg-zinc-900/20 border border-zinc-800/50 rounded-2xl p-4 animate-pulse",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-zinc-800 rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-zinc-800 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-1/2 mb-1"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-2/3"})]})]})},i))})]})]})}function Ie(){const{user:m,loading:i}=xe(),[h,f]=a.useState(!1),[c,o]=a.useState(!0);return a.useEffect(()=>{if(!m?.uid){o(!1),f(!1);return}(async()=>{try{const n=E(g,"users",m.uid),v=await C(n);if(v.exists()){const p=v.data();f(p.isBanned||!1)}else f(!1)}catch(n){console.error("Error checking ban status:",n),f(!1)}finally{o(!1)}})()},[m?.uid]),a.useEffect(()=>{(async()=>{try{const n=new Date().toLocaleDateString("en-CA");if(localStorage.getItem("lastVisitDate")!==n){localStorage.setItem("lastVisitDate",n);const p=E(g,"analytics",n);await $(p,{visitors:pe(1)},{merge:!0})}}catch(n){console.error("Analytics error:",n)}})()},[]),i||c?e.jsx(Le,{}):m&&h?e.jsx(a.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(Ne,{})}):m?e.jsxs(ve,{children:[e.jsx(Y,{position:"top-center",reverseOrder:!1,toastOptions:{style:{borderRadius:"8px",background:"#333",color:"#fff"},success:{iconTheme:{primary:"#FACC15",secondary:"black"}}}}),e.jsx(a.Suspense,{fallback:e.jsx(P,{}),children:e.jsxs("main",{className:"bg-[#0a0a0a] text-white pb-24 relative",children:[e.jsxs(J,{children:[e.jsx(N,{path:"/",element:e.jsx(ye,{})}),e.jsx(N,{path:"/semester/:semId",element:e.jsx(De,{})}),e.jsx(N,{path:"/semester/:semId/:subjectId",element:e.jsx(Ae,{})}),e.jsx(N,{path:"/library",element:e.jsx(Se,{})}),e.jsx(N,{path:"/upload",element:e.jsx(H,{requiredRole:"admin",children:e.jsx(Me,{})})}),e.jsx(N,{path:"/admin",element:e.jsx(H,{requiredRole:"admin",children:e.jsx(Ee,{})})}),e.jsx(N,{path:"/profile",element:e.jsx(_e,{})}),e.jsx(N,{path:"*",element:e.jsx(Z,{to:"/",replace:!0})})]}),e.jsx(ze,{}),e.jsx(Re,{})]})})]}):e.jsx(a.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(we,{})})}function Re(){const m=ee(),[i,h]=a.useState(!1),f=["/","/library","/profile"].includes(m.pathname),c=()=>{h(!i)},o=()=>{h(!1)},d=()=>{window.open("https://chatgpt.com/g/g-698c4ec0c6d4819190659b4dff84141e-b-n-n-assignment-bot-pro","_blank","noopener,noreferrer"),o()},n=()=>{window.open("https://gemini.google.com/gem/7fafd606ec16","_blank"),o()};return e.jsx(e.Fragment,{children:f&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:c,className:"fixed bottom-24 right-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4 rounded-full shadow-lg z-50 hover:scale-105 transition-transform duration-200 flex items-center gap-2","aria-label":"Open Assignment AI assistant",children:[e.jsx(B,{size:20}),e.jsx("span",{className:"hidden sm:inline font-medium text-sm",children:"Assignment AI"})]}),i&&e.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-[100] flex items-center justify-center p-4 animate-in fade-in zoom-in-95 duration-300",onClick:o,children:[e.jsx("div",{className:"absolute w-64 h-64 bg-gradient-to-r from-purple-600/30 to-blue-600/30 rounded-full blur-3xl -top-10 -right-10"}),e.jsx("div",{className:"absolute w-56 h-56 bg-gradient-to-r from-emerald-600/30 to-cyan-600/30 rounded-full blur-3xl -bottom-10 -left-10"}),e.jsxs("div",{className:"w-full max-w-sm bg-[#09090b] border border-zinc-800 rounded-3xl overflow-hidden shadow-2xl relative",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"p-5 border-b border-zinc-800 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-bold text-white tracking-wide",children:"AI Assignment Writer"}),e.jsx("button",{onClick:o,className:"w-8 h-8 rounded-full bg-zinc-800 hover:bg-zinc-700 flex items-center justify-center transition-colors","aria-label":"Close AI assistant modal",children:e.jsx(te,{size:16,className:"text-white"})})]}),e.jsxs("div",{className:"p-5 space-y-3",children:[e.jsxs("div",{onClick:d,className:"flex items-center gap-4 p-4 rounded-xl border border-emerald-500/20 hover:border-emerald-400 bg-gradient-to-r from-emerald-900/40 to-zinc-900/60 hover:bg-emerald-900/50 transition-all duration-300 group cursor-pointer",children:[e.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400 flex-shrink-0",children:e.jsx(se,{size:28})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-white",children:"ChatGPT Edition"}),e.jsx("p",{className:"text-xs text-emerald-200/70",children:"Logical & Precise."})]})]}),e.jsxs("div",{onClick:n,className:"flex items-center gap-4 p-4 rounded-xl border border-blue-500/20 hover:border-blue-400 bg-gradient-to-r from-blue-900/40 to-purple-900/40 hover:bg-blue-900/50 transition-all duration-300 group cursor-pointer",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg text-blue-400 flex-shrink-0",children:e.jsx(B,{size:28})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-white",children:"Gemini Edition"}),e.jsx("p",{className:"text-xs text-blue-200/70",children:"Creative & Fast."})]})]})]})]})]})]})})}re.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(je,{children:e.jsx(ae,{children:e.jsx(Ie,{})})})}));export{Ze as a,R as b,g as d,xe as u};
