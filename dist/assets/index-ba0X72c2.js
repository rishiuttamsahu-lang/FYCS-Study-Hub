const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-sF3Gz_gp.js","assets/vendor-react-DTJB9r93.js","assets/vendor-BigPqmVK.js","assets/MaterialCard-BDkd7TR5.js","assets/vendor-firebase-B7eFefMy.js","assets/Login-CLp5q3hA.js","assets/Library-DX5rLBHU.js","assets/Materials-CNpOmzw7.js","assets/BannedPage-DkOe2qQw.js","assets/Admin-9YivQl74.js","assets/Profile-BkQrQnax.js","assets/Subjects-DXdv3Nqf.js","assets/Upload-DNX1yYOF.js","assets/Navbar-DCsL45n_.js","assets/ProtectedRoute-B2ZBgAL4.js"])))=>i.map(i=>d[i]);
import{r as a,j as e,L as Q,F as X,R as Y,a as N,N as J,u as Z,S as B,X as ee,B as te,c as se,H as re}from"./vendor-react-DTJB9r93.js";import{i as ae,g as ne,G as oe,a as ie,o as D,q as O,b as ce,c as A,d as le,e as _,f as C,s as de,u as T,h as F,j as V,k as I,w as q,l as M,m as ue,n as me}from"./vendor-firebase-B7eFefMy.js";import"./vendor-BigPqmVK.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))p(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&p(l)}).observe(document,{childList:!0,subtree:!0});function h(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function p(i){if(i.ep)return;i.ep=!0;const n=h(i);fetch(i.href,n)}})();const pe="modulepreload",fe=function(m){return"/"+m},U={},w=function(o,h,p){let i=Promise.resolve();if(h&&h.length>0){let v=function(f){return Promise.all(f.map(u=>Promise.resolve(u).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=l?.nonce||l?.getAttribute("nonce");i=v(h.map(f=>{if(f=fe(f),f in U)return;U[f]=!0;const u=f.endsWith(".css"),b=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${b}`))return;const x=document.createElement("link");if(x.rel=u?"stylesheet":pe,u||(x.as="script"),x.crossOrigin="",x.href=f,d&&x.setAttribute("nonce",d),document.head.appendChild(x),u)return new Promise((y,z)=>{x.addEventListener("load",y),x.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${f}`)))})}))}function n(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&n(d.reason);return o().catch(n)})},ge={apiKey:"AIzaSyCCDR8O9zy0bSyCa5dsinR8SSmnMQcWxTY",authDomain:"fycs-study-hub.firebaseapp.com",projectId:"fycs-study-hub",storageBucket:"fycs-study-hub.firebasestorage.app",messagingSenderId:"308883339928",appId:"1:308883339928:web:a5e59d402b7ddf0e4b2eed"},$=ae(ge),R=ne($),he=new oe,g=ie($),G=a.createContext(),be=()=>{const m=a.useContext(G);if(!m)throw new Error("useApp must be used within an AppProvider");return m},xe=({children:m})=>{const[o,h]=a.useState([]),[p,i]=a.useState([]),[n]=a.useState([{id:"1",name:"Semester 1",active:!0},{id:"2",name:"Semester 2",active:!0},{id:"3",name:"Semester 3",active:!0},{id:"4",name:"Semester 4",active:!0}]),[l,d]=a.useState(null),[v,f]=a.useState([]),[u,b]=a.useState(!0),[x,y]=a.useState(null);a.useEffect(()=>{const s=D(O(A(g,"materials"),ce("createdAt","desc")),t=>{const r=t.docs.map(c=>({id:c.id,...c.data()}));h(r),u&&b(!1)},t=>{console.error("Error listening to materials: ",t),u&&b(!1)});return()=>s()},[u]),a.useEffect(()=>{const s=D(A(g,"subjects"),t=>{const r=t.docs.map(c=>({id:c.id,...c.data()}));i(r),u&&b(!1)},t=>{console.error("Error listening to subjects: ",t),u&&b(!1)});return()=>s()},[u]),a.useEffect(()=>{const s=D(A(g,"users"),t=>{const c=t.docs.map(S=>({id:S.id,...S.data()})).sort((S,E)=>{const k=S.createdAt?.seconds||0;return(E.createdAt?.seconds||0)-k});f(c)},t=>{console.error("Error listening to users: ",t)});return()=>s()},[]),a.useEffect(()=>{const s=le(R,async t=>{if(t){const r=_(g,"users",t.uid),c=await C(r);if(!c.exists())await de(r,{uid:t.uid,displayName:t.displayName,email:t.email,photoURL:t.photoURL,role:"student",isBanned:!1,createdAt:new Date}),y("student"),d(t);else{const S=c.data();y(S.role||"student"),d(t)}}else d(null),y(null);u&&b(!1)});return()=>s()},[u]),a.useEffect(()=>{if(!l?.uid)return;const s=_(g,"users",l.uid),t=D(s,r=>{if(r.exists()){const c=r.data();y(c.role||"student"),f(S=>S.map(E=>E.uid===l.uid?{...E,role:c.role}:E))}},r=>{console.error("Error listening to user role: ",r)});return()=>t()},[l?.uid]);const z=l?.email==="rishiuttamsahu@gmail.com"||x==="admin",L=a.useMemo(()=>{const s=o.filter(r=>r.status==="Approved"),t=o.filter(r=>r.status==="Pending");return{totalViews:s.reduce((r,c)=>r+(c.views||0),0),totalDownloads:s.reduce((r,c)=>r+(c.downloads||0),0),pendingRequests:t.length,totalMaterials:o.length,approvedMaterials:s.length,totalSubjects:p.length,totalSemesters:n.length}},[o,p,n]),K={materials:o,subjects:p,semesters:n,users:v,user:l,userRole:x,stats:L,loading:u,isAdmin:z,login:async()=>{try{return{success:!0,user:(await me(R,he)).user}}catch(s){return console.error("Login error:",s),{success:!1,error:s.message}}},logout:async()=>{try{return await ue(R),{success:!0}}catch(s){return console.error("Logout error:",s),{success:!1,error:s.message}}},addMaterial:async s=>{try{const t=s.title.trim(),r=s.subjectId,c=O(A(g,"materials"),q("subjectId","==",r),q("title","==",t));if(!(await M(c)).empty)return{success:!1,error:"âš ï¸ Duplicate Found: A file with this Name and Subject already exists!"};const E={title:t,subjectId:r,semId:s.semId,type:s.type,link:s.link.trim(),status:"Pending",views:0,downloads:0,uploadedBy:s.uploadedBy||"Student",date:I(),createdAt:I()};return{success:!0,id:(await F(A(g,"materials"),E)).id}}catch(t){return console.error("Error adding material:",t),{success:!1,error:t?.message||t?.toString()||"Failed to add material"}}},approveMaterial:async s=>{try{return await T(_(g,"materials",s),{status:"Approved",approvedAt:I()}),{success:!0}}catch(t){return console.error("Error approving material:",t),{success:!1,error:t?.message||t?.toString()||"Failed to approve material"}}},rejectMaterial:async s=>{try{return await V(_(g,"materials",s)),{success:!0}}catch(t){return console.error("Error rejecting material:",t),{success:!1,error:t?.message||t?.toString()||"Failed to reject material"}}},deleteMaterial:async s=>{try{return await V(_(g,"materials",s)),{success:!0}}catch(t){return console.error("Error deleting material:",t),{success:!1,error:t?.message||t?.toString()||"Failed to delete material"}}},addSubject:async(s,t)=>{try{const r={name:s.trim(),semId:Number(t),icon:"Book",createdAt:new Date};return{success:!0,id:(await F(A(g,"subjects"),r)).id}}catch(r){return console.error("Error adding subject:",r),{success:!1,error:r?.message||r?.toString()||"Failed to add subject"}}},incrementView:async s=>{try{const t=_(g,"materials",s),r=await C(t);if(r.exists()){const c=r.data().views||0;return await T(t,{views:c+1}),{success:!0}}else return{success:!1,error:"Material not found"}}catch(t){return console.error("Error incrementing view:",t),{success:!1,error:t?.message||t?.toString()||"Failed to increment view count"}}},getSubjectById:s=>p.find(t=>t.id===s),getSemesterById:s=>n.find(t=>t.id===s),getMaterialsBySubject:s=>o.filter(t=>t.subjectId===s&&t.status==="Approved"),getMaterialsBySemester:s=>o.filter(t=>t.semId===s&&t.status==="Approved"),getPendingMaterials:()=>o.filter(s=>s.status==="Pending"),getApprovedMaterials:()=>o.filter(s=>s.status==="Approved"),getRecentMaterials:(s=10)=>o.filter(t=>t.status==="Approved").sort((t,r)=>{const c=t.createdAt?.toDate?t.createdAt.toDate():new Date(t.createdAt||t.date||Date.now());return(r.createdAt?.toDate?r.createdAt.toDate():new Date(r.createdAt||r.date||Date.now()))-c}).slice(0,s),getSubjectsBySemester:s=>p.filter(t=>Number(t.semId)===Number(s))};return e.jsx(G.Provider,{value:K,children:m})},W=a.createContext(),Je=()=>a.useContext(W),je=({children:m})=>{const[o,h]=a.useState({subjects:[],recents:[]}),[p,i]=a.useState(!1),[n,l]=a.useState([]),[d,v]=a.useState(!1),f=async()=>{if(!d)try{console.log("ðŸ•µï¸â€â™‚ï¸ DETECTIVE MODE: Looking for data...");const u=await M(A(g,"materials"));console.log(`ðŸ“‚ Collection 'materials': Found ${u.size} items`);const b=await M(A(g,"Materials"));console.log(`ðŸ“‚ Collection 'Materials': Found ${b.size} items`);const x=await M(A(g,"notes"));console.log(`ðŸ“‚ Collection 'notes': Found ${x.size} items`);let y=[...u.docs.map(j=>({id:j.id,...j.data()})),...b.docs.map(j=>({id:j.id,...j.data()})),...x.docs.map(j=>({id:j.id,...j.data()}))];console.log(`ðŸŽ‰ TOTAL RAW ITEMS FOUND: ${y.length}`),y.length===0&&alert("âš ï¸ Database Connected but NO Data Found! Check Collection Name in Firebase Console."),l(y),v(!0),h({subjects:[],recents:y.slice(0,5)});const L=(await M(A(g,"subjects"))).docs.map(j=>({id:j.id,...j.data()}));h(j=>({...j,subjects:L})),i(!0)}catch(u){console.error("ðŸ”¥ CRITICAL ERROR:",u),alert("Error: "+u.message),i(!0),v(!0)}};return e.jsx(W.Provider,{value:{homeData:o,libraryMaterials:n,fetchLibraryData:f,fetchHomeData:f,isLibraryLoaded:d,isHomeLoaded:p},children:m})};function P(){return e.jsxs("div",{className:"flex flex-col h-screen w-full items-center justify-center bg-[#0a0a0a]",children:[e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("div",{className:"absolute w-16 h-16 rounded-full border-t-4 border-b-4 border-blue-500 animate-spin opacity-50"}),e.jsx(Q,{className:"text-yellow-400 animate-spin z-10",size:32})]}),e.jsx("p",{className:"mt-4 text-zinc-400 text-sm font-medium animate-pulse",children:"Loading awesomeness..."})]})}const ve=a.lazy(()=>w(()=>import("./Home-sF3Gz_gp.js"),__vite__mapDeps([0,1,2,3,4]))),ye=a.lazy(()=>w(()=>import("./Login-CLp5q3hA.js"),__vite__mapDeps([5,1,2,4]))),we=a.lazy(()=>w(()=>import("./Library-DX5rLBHU.js"),__vite__mapDeps([6,1,2,3,4]))),Se=a.lazy(()=>w(()=>import("./Materials-CNpOmzw7.js"),__vite__mapDeps([7,1,2,3,4]))),Ae=a.lazy(()=>w(()=>import("./BannedPage-DkOe2qQw.js"),__vite__mapDeps([8,1,2,4]))),Ne=a.lazy(()=>w(()=>import("./Admin-9YivQl74.js"),__vite__mapDeps([9,1,2,4]))),Ee=a.lazy(()=>w(()=>import("./Profile-BkQrQnax.js"),__vite__mapDeps([10,1,2,4]))),_e=a.lazy(()=>w(()=>import("./Subjects-DXdv3Nqf.js"),__vite__mapDeps([11,1,2,4]))),Me=a.lazy(()=>w(()=>import("./Upload-DNX1yYOF.js"),__vite__mapDeps([12,1,2,4]))),ze=a.lazy(()=>w(()=>import("./Navbar-DCsL45n_.js"),__vite__mapDeps([13,1,2,4]))),H=a.lazy(()=>w(()=>import("./ProtectedRoute-B2ZBgAL4.js"),__vite__mapDeps([14,1,2,4])));function De(){return e.jsxs("div",{className:"h-screen bg-[#0a0a0a] text-white overflow-hidden",children:[e.jsxs("div",{className:"h-16 w-full bg-zinc-950 border-b border-zinc-800 flex items-center px-4 space-x-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-zinc-800 animate-pulse"}),e.jsx("div",{className:"h-4 bg-zinc-800 rounded w-24 animate-pulse"}),e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"h-6 w-6 bg-zinc-800 rounded-full animate-pulse"})]}),e.jsxs("div",{className:"p-5 pt-6 max-w-md mx-auto",children:[e.jsx("div",{className:"h-48 w-full bg-zinc-900/50 rounded-3xl animate-pulse mb-6"}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-4 h-4 bg-zinc-800 rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-24 animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[...Array(4)].map((m,o)=>e.jsx("div",{className:"h-32 bg-zinc-900/30 rounded-xl animate-pulse"},o))}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-zinc-800 rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-20 animate-pulse"})]}),e.jsx("div",{className:"h-4 bg-zinc-800 rounded w-16 animate-pulse"})]}),e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((m,o)=>e.jsx("div",{className:"bg-zinc-900/20 border border-zinc-800/50 rounded-2xl p-4 animate-pulse",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-zinc-800 rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-zinc-800 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-1/2 mb-1"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-2/3"})]})]})},o))})]})]})}function Le(){const{user:m,loading:o}=be(),[h,p]=a.useState(!1),[i,n]=a.useState(!0);return a.useEffect(()=>{if(!m?.uid){n(!1),p(!1);return}(async()=>{try{const d=_(g,"users",m.uid),v=await C(d);if(v.exists()){const f=v.data();p(f.isBanned||!1)}else p(!1)}catch(d){console.error("Error checking ban status:",d),p(!1)}finally{n(!1)}})()},[m?.uid]),o||i?e.jsx(De,{}):m&&h?e.jsx(a.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(Ae,{})}):m?e.jsxs(je,{children:[e.jsx(X,{position:"top-center",reverseOrder:!1,toastOptions:{style:{borderRadius:"8px",background:"#333",color:"#fff"},success:{iconTheme:{primary:"#FACC15",secondary:"black"}}}}),e.jsx(a.Suspense,{fallback:e.jsx(P,{}),children:e.jsxs("main",{className:"bg-[#0a0a0a] text-white pb-24 relative",children:[e.jsxs(Y,{children:[e.jsx(N,{path:"/",element:e.jsx(ve,{})}),e.jsx(N,{path:"/semester/:semId",element:e.jsx(_e,{})}),e.jsx(N,{path:"/semester/:semId/:subjectId",element:e.jsx(Se,{})}),e.jsx(N,{path:"/library",element:e.jsx(we,{})}),e.jsx(N,{path:"/upload",element:e.jsx(H,{requiredRole:"admin",children:e.jsx(Me,{})})}),e.jsx(N,{path:"/admin",element:e.jsx(H,{requiredRole:"admin",children:e.jsx(Ne,{})})}),e.jsx(N,{path:"/profile",element:e.jsx(Ee,{})}),e.jsx(N,{path:"*",element:e.jsx(J,{to:"/",replace:!0})})]}),e.jsx(ze,{}),e.jsx(Ie,{})]})})]}):e.jsx(a.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(ye,{})})}function Ie(){const m=Z(),[o,h]=a.useState(!1),p=["/","/library","/profile"].includes(m.pathname),i=()=>{h(!o)},n=()=>{h(!1)},l=()=>{window.open("https://chatgpt.com/g/g-698c4ec0c6d4819190659b4dff84141e-b-n-n-assignment-bot-pro","_blank","noopener,noreferrer"),n()},d=()=>{window.open("https://gemini.google.com/gem/7fafd606ec16","_blank"),n()};return e.jsx(e.Fragment,{children:p&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:i,className:"fixed bottom-24 right-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white p-4 rounded-full shadow-lg z-50 hover:scale-105 transition-transform duration-200 flex items-center gap-2","aria-label":"Open Assignment AI assistant",children:[e.jsx(B,{size:20}),e.jsx("span",{className:"hidden sm:inline font-medium text-sm",children:"Assignment AI"})]}),o&&e.jsxs("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md z-[100] flex items-center justify-center p-4 animate-in fade-in zoom-in-95 duration-300",onClick:n,children:[e.jsx("div",{className:"absolute w-64 h-64 bg-gradient-to-r from-purple-600/30 to-blue-600/30 rounded-full blur-3xl -top-10 -right-10"}),e.jsx("div",{className:"absolute w-56 h-56 bg-gradient-to-r from-emerald-600/30 to-cyan-600/30 rounded-full blur-3xl -bottom-10 -left-10"}),e.jsxs("div",{className:"w-full max-w-sm bg-[#09090b] border border-zinc-800 rounded-3xl overflow-hidden shadow-2xl relative",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"p-5 border-b border-zinc-800 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-bold text-white tracking-wide",children:"AI Assignment Writer"}),e.jsx("button",{onClick:n,className:"w-8 h-8 rounded-full bg-zinc-800 hover:bg-zinc-700 flex items-center justify-center transition-colors","aria-label":"Close AI assistant modal",children:e.jsx(ee,{size:16,className:"text-white"})})]}),e.jsxs("div",{className:"p-5 space-y-3",children:[e.jsxs("div",{onClick:l,className:"flex items-center gap-4 p-4 rounded-xl border border-emerald-500/20 hover:border-emerald-400 bg-gradient-to-r from-emerald-900/40 to-zinc-900/60 hover:bg-emerald-900/50 transition-all duration-300 group cursor-pointer",children:[e.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg text-emerald-400 flex-shrink-0",children:e.jsx(te,{size:28})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-white",children:"ChatGPT Edition"}),e.jsx("p",{className:"text-xs text-emerald-200/70",children:"Logical & Precise."})]})]}),e.jsxs("div",{onClick:d,className:"flex items-center gap-4 p-4 rounded-xl border border-blue-500/20 hover:border-blue-400 bg-gradient-to-r from-blue-900/40 to-purple-900/40 hover:bg-blue-900/50 transition-all duration-300 group cursor-pointer",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg text-blue-400 flex-shrink-0",children:e.jsx(B,{size:28})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-white",children:"Gemini Edition"}),e.jsx("p",{className:"text-xs text-blue-200/70",children:"Creative & Fast."})]})]})]})]})]})]})})}se.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(xe,{children:e.jsx(re,{children:e.jsx(Le,{})})})}));export{Je as a,R as b,g as d,be as u};
