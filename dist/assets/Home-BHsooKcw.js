import{c,u as N,a as f,b as v,r as w,j as e,L as y}from"./index-NIf_5wet.js";import{M as z}from"./MaterialCard-CHtdg0Xk.js";import"./file-text-Cw3Bbaec.js";import"./external-link-IuaWcDb-.js";import"./download-BFxrq33Z.js";import"./user-DlI_S5OL.js";import"./pencil-UkZLLmQW.js";const k=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],M=c("book-open",k);const D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],A=c("circle",D);const _=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],S=c("graduation-cap",_);const C=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],$=c("layers",C);const I=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],H=c("lock",I),L="/assets/image-DieXvyk4.png",P=()=>{const d=N(),{semesters:o,getSubjectById:m,getSemesterById:E,isAdmin:x}=f(),{homeData:l,fetchHomeData:r,isHomeLoaded:n}=v();w.useEffect(()=>{r()},[r]),console.log("ðŸ  Home Page Data Received:",l);const p=l?.subjects||[],u=l?.recents||[],h=o.map(s=>({id:s.id,title:s.name,subjects:p.filter(t=>Number(t.semId)===Number(s.id)).length,locked:s.id==="3"||s.id==="4"})),i=u.slice(0,10);console.log("ðŸ“Š Recent Materials for Display:",i);const b=s=>{if(!s.createdAt)return!1;const t=s.createdAt?.toDate?s.createdAt.toDate():new Date(s.createdAt||s.date||Date.now()),a=new Date(Date.now()-1440*60*1e3);return t>a},g=()=>e.jsxs("div",{className:"animate-pulse bg-zinc-800 rounded-xl h-40 w-full p-4",children:[e.jsx("div",{className:"bg-zinc-700 rounded-xl w-9 h-9 mb-3"}),e.jsx("div",{className:"bg-zinc-700 rounded h-4 w-3/4 mb-2"}),e.jsx("div",{className:"bg-zinc-700 rounded h-3 w-1/2"})]}),j=s=>{if(!s)return s;if(s.includes("drive.google.com/file/d/")){const t=s.match(/\/file\/d\/([^\/]+)/);if(t&&t[1])return`https://drive.google.com/uc?export=download&id=${t[1]}&confirm=t`}else if(s.includes("drive.google.com/open?id=")){const a=new URL(s).searchParams.get("id");if(a)return`https://drive.google.com/uc?export=download&id=${a}&confirm=t`}else if(s.includes("/d/")&&s.includes("/view")){const t=s.match(/\/d\/([^\/]+)\/view/);if(t&&t[1])return`https://drive.google.com/uc?export=download&id=${t[1]}&confirm=t`}return s};return n?e.jsxs("div",{className:"p-5 pt-10 max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("img",{src:L,alt:"FYCS Study Hub Logo",className:"w-16 h-16 object-contain mx-auto mb-4"}),e.jsx("h1",{className:"text-3xl font-bold mb-1",children:"FYCS Study Hub"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Your central hub for first year computer science"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-white/50 uppercase text-[10px] tracking-widest font-bold",children:[e.jsx(M,{size:14}),e.jsx("span",{children:"Quick Section"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-8",children:h.map(s=>{const t=s.locked,a=s.id==="2";return e.jsxs("button",{type:"button",onClick:t?void 0:()=>d(`/semester/${s.id}`),disabled:t,className:`glass-card p-4 text-left transition-colors ${t?"opacity-70 cursor-not-allowed":"hover:bg-white/5"} relative`,children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 w-9 h-9 rounded-xl flex items-center justify-center mb-3 relative",children:[e.jsx(S,{size:18,className:"text-white/90"}),t&&e.jsx(H,{size:14,className:"absolute -top-1 -right-1 text-amber-400"}),a&&!t&&e.jsx(A,{size:8,className:"absolute -top-0.5 -right-0.5 text-green-500 fill-current"})]}),e.jsxs("h2",{className:"font-bold text-sm mb-1 flex items-center gap-1",children:[s.title,a&&!t&&e.jsx("span",{className:"text-[8px] text-green-500 bg-green-500/10 px-1 py-0.5 rounded",children:"LIVE"})]}),t?e.jsx("span",{className:"inline-block px-2 py-0.5 bg-amber-500/10 text-amber-400 text-[10px] rounded-full whitespace-nowrap",children:"Coming Soon"}):e.jsxs("p",{className:"text-[10px] text-white/50",children:[s.subjects," subjects available"]})]},s.id)})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-white/50 uppercase text-[10px] tracking-widest font-bold",children:[e.jsx($,{size:14}),e.jsx("span",{children:"Materials"})]}),e.jsx(y,{to:"/library",className:"text-[11px] font-semibold text-[#FFD700] hover:opacity-90 transition-opacity",children:"Explore"})]}),e.jsx("div",{className:"space-y-4",children:i&&i.length>0?i.map(s=>e.jsx(z,{material:s,convertToDownloadLink:j,navigateToSubject:!0,navigate:d,isNewMaterial:b,getSubjectById:m},s.id)):e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx("div",{className:"text-white/50 mb-2",children:"No materials found"}),e.jsx("div",{className:"text-sm text-white/40",children:n?"No materials available yet":"Loading materials..."}),x&&e.jsx("button",{type:"button",className:"btn-primary mt-4 px-6 py-2 text-sm",onClick:()=>d("/upload"),children:"Upload Material"})]})})]}):e.jsxs("div",{className:"p-5 pt-10 max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"w-16 h-16 bg-zinc-800 rounded-full mx-auto mb-4 animate-pulse"}),e.jsx("div",{className:"h-8 bg-zinc-800 rounded w-48 mx-auto mb-2 animate-pulse"}),e.jsx("div",{className:"h-4 bg-zinc-800 rounded w-64 mx-auto animate-pulse"})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-4 h-4 bg-zinc-800 rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-24 animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[...Array(4)].map((s,t)=>e.jsx(g,{},t))}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-zinc-800 rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-20 animate-pulse"})]}),e.jsx("div",{className:"h-4 bg-zinc-800 rounded w-16 animate-pulse"})]}),e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((s,t)=>e.jsx("div",{className:"glass-card p-4 animate-pulse",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-zinc-800 rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-zinc-800 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-1/2 mb-1"}),e.jsx("div",{className:"h-3 bg-zinc-800 rounded w-2/3"})]})]})},t))})]})};export{P as default};
